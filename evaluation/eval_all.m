clear all;
close all;
clc;

%% configure the job
datasets={...
    'bikes','boat','graf','leuven','trees','ubc','wall','rotwall'};
numbers={...
    4,4,3,4,4,4,4,2};
detectors={...
    {'BRISK24000','BRISKOLD45','BRISKOLD45','SURF','SIFT20'},...
    {'BRISK1300000','BRISKOLD90','BRISKOLD90','SURF','SIFT2.2'},...
    {'BRISK360000','BRISKOLD76','BRISKOLD76','SURF','SIFT3.8'},...
    {'BRISK200000','BRISKOLD64','BRISKOLD64','SURF','SIFT3.2'},...
    {'BRISK380000','BRISKOLD83','BRISKOLD83','SURF','SIFT1.6'},...
    {'BRISK1550000','BRISKOLD108','BRISKOLD108','SURF','SIFT1.9'},...
    {'BRISK200000','BRISKOLD64','BRISKOLD64','SURF','SIFT1.85'},...
    {'BRISK290000','BRISKOLD71','BRISKOLD71','SURF','SIFT1.8'},...
    {'S-BRISKOLD71','S-BRISKOLD71','BRISKOLD71','S-BRISKOLD71',}};
descriptors={...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'BRISK','BRISK','BRISKOLD','SURF','SIFT'},...
    {'U-BRISK','BRISK','BRISK','BRISK','BRIEF'}};
legendentries={...
    'HARRIS-BRISK2','FAST-BRISK2','FAST-BRISK1','SURF','SIFT'};
clrs={...
    [0.9 0.1 0.1],[0.7 0.1 0.1],[0.5 0.1 0.1],[0.1 0.7 0.1],[0.1 0.1 0.8]};
stls={...
    '-','-','-','--','-.'};

%% processing
for k=5:5%1:size(datasets,2)
    figure(k)
    hold on;
    % evaluate all
    legendentries2=legendentries;
    for i=1:size(detectors{1},2)
        [ oneMinusPrecision,recall,corresp ] = ...
            processFiles( 'sim', '/home/lestefan/datasets/mikolajczyk', ...
            datasets{k}, detectors{k}{i}, descriptors{k}{i},  numbers{k} );
        % plot
        plot(oneMinusPrecision,recall,'Color',clrs{i},'LineStyle',stls{i});
        legendentries2{i}=...
            [legendentries{i} ', corresp: ' num2str(corresp)];
    end
    % clean up figure  
    title([datasets{k} ' 1-' num2str(numbers{k})])
    xlabel('1-precision')
    ylabel('Recall')
    legend(legendentries2);
    grid on;
    axis([0 1 0 1]);
end
